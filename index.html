<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Consulta Renovación Cédula RD 2026–2027</title>

<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:Arial}

body{
background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
min-height:100vh;
display:flex;
justify-content:center;
align-items:center;
}

.app{
width:420px;
background:white;
border-radius:20px;
padding:25px;
box-shadow:0 20px 40px rgba(0,0,0,0.4);
}

h1{
text-align:center;
font-size:20px;
margin-bottom:20px;
color:#0b3d91;
}

input,button{
width:100%;
padding:12px;
margin-top:10px;
border-radius:10px;
border:1px solid #ccc;
font-size:14px;
}

button{
background:#0b3d91;
color:white;
border:none;
font-weight:bold;
cursor:pointer;
}

button:hover{
background:#072a63;
}

.result{
margin-top:20px;
background:#f4f6f9;
padding:15px;
border-radius:12px;
}

.badge{
display:inline-block;
padding:6px 12px;
border-radius:20px;
background:#d4edda;
color:#155724;
font-size:13px;
margin-bottom:10px;
}

.timer{
margin-top:8px;
font-weight:bold;
color:#0b3d91;
}

.card{
margin-top:15px;
background:linear-gradient(135deg,#004aad,#001f4d);
color:white;
padding:15px;
border-radius:15px;
font-size:14px;
}

.error{
background:#f8d7da;
color:#721c24;
padding:10px;
border-radius:8px;
margin-top:10px;
}
</style>
</head>

<body>

<div class="app">
<h1>Renovación Cédula RD 2026–2027</h1>

<input type="text" id="nombre" placeholder="Nombre completo">
<input type="date" id="fecha">

<button onclick="calcular()">Consultar</button>

<div id="output"></div>
</div>

<script>
function calcular(){

const nombre = document.getElementById("nombre").value.trim();
const fechaInput = document.getElementById("fecha").value;
const output = document.getElementById("output");

if(!nombre || !fechaInput){
output.innerHTML = `<div class="error">Complete todos los campos.</div>`;
return;
}

const nacimiento = new Date(fechaInput);
const hoy = new Date();

let edad = hoy.getFullYear() - nacimiento.getFullYear();
if(
hoy.getMonth() < nacimiento.getMonth() ||
(hoy.getMonth() === nacimiento.getMonth() && hoy.getDate() < nacimiento.getDate())
){
edad--;
}

if(edad < 18){
output.innerHTML = `<div class="error">Debe ser mayor de 18 años.</div>`;
return;
}

const mes = nacimiento.getMonth(); // 0=Enero
let anioRenovacion;
let diaInicio = 1;

/*
Reglas oficiales:
Abril (3) – Diciembre (11) → 2026
Enero (0) – Marzo (2) → 2027
*/

if(mes >= 3){
anioRenovacion = 2026;

if(mes === 3){
diaInicio = 12; // Abril inicia el 12
}

}else{
anioRenovacion = 2027;
}

const fechaRenovacion = new Date(anioRenovacion, mes, diaInicio);
const finValidez = new Date(2027,2,31);

output.innerHTML = `
<div class="result">

<div class="badge">
Te corresponde renovar en ${anioRenovacion}
</div>

<p><strong>Tu mes asignado:</strong> ${fechaRenovacion.toLocaleDateString()}</p>
<p><strong>Cédula actual válida hasta:</strong> ${finValidez.toLocaleDateString()}</p>

<div class="timer" id="timer"></div>

<div class="card">
<strong>Nueva Cédula Digital</strong><br><br>
Nombre: ${nombre}<br>
Mes asignado: ${fechaRenovacion.toLocaleDateString()}<br>
Proceso inicia oficialmente el 12/04/2026<br>
Estado actual: Válida hasta 31/03/2027
</div>

</div>
`;

iniciarContador(fechaRenovacion);
}

function iniciarContador(fecha){

const timer = document.getElementById("timer");

function actualizar(){
const ahora = new Date();
const diferencia = fecha - ahora;

if(diferencia <= 0){
timer.innerHTML = "Tu mes ya inició.";
return;
}

const dias = Math.floor(diferencia/(1000*60*60*24));
const horas = Math.floor((diferencia/(1000*60*60))%24);
const minutos = Math.floor((diferencia/(1000*60))%60);
const segundos = Math.floor((diferencia/1000)%60);

timer.innerHTML =
`Cuenta regresiva: ${dias}d ${horas}h ${minutos}m ${segundos}s`;
}

actualizar();
setInterval(actualizar,1000);
}
</script>

</body>
</html>
